---
import * as API from "../../../utils/api";

const { origin, searchParams } = Astro.url;

const api = API.of(origin);

const params = Object.fromEntries([["type", "new"], ...searchParams.entries()]);

const result = await api.get(`stories`, params);

return new Response(JSON.stringify(result), {
  headers: {
    "content-type": "application/json",
  },
});
---
